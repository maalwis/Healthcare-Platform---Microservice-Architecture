# Implementation Schedule & Cross‑Cutting Enhancements

This schedule tracks feature delivery and embeds cross‑cutting improvements (security, resilience, CI/CD, observability, configuration, messaging) for each step.  All changes are gated by GitHub Actions pipelines (lint, tests, contracts, container build, security scans) and deployed via CI/CD.

|   Step | Endpoints & Logic                                                                                                                                                       | Event Publish                                | Services & Actions                                                                                      | Cross‑Cutting Enhancements                                                                                                                                                                                                                                       |    Done    |
| -----: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------: |
|  **1** | • `POST /api/v1/patients` – create Patient<br>• BillingService listener for `PatientRegistered`                                                                         | `PatientRegistered`                          | BillingService: init billing profile<br>AuditLogging: record event                                      | • **Security**: mTLS + Vault for JWT secret<br>• **Resilience**: circuit breaker, retry on listener<br>• **CI/CD**: Pact contract, unit/integration tests, Docker build & push<br>• **Observability**: logs, metrics, trace<br>• **Config**: Spring Cloud Config | \[Pending] |
|  **2** | • `POST /api/v1/appointments` – book Appointment                                                                                                                        | `AppointmentCreated`                         | BillingService: draft invoice<br>Notification: send confirmation                                        | • **Security**: RBAC enforcement<br>• **Resilience**: bulkhead isolation, timeout<br>• **CI/CD**: contract tests, security scan<br>• **Observability**: Prometheus metrics, Jaeger spans<br>• **Config**: dynamic refresh                                        | \[Pending] |
|  **3** | • `POST /api/v1/medications/{id}/dispense` – record dispense                                                                                                            | `MedicationDispensed`                        | Inventory: decrement & stock‑low<br>AuditLogging: record event                                          | • **Messaging**: DLQ + retry policy<br>• **Security**: service-to-service JWT propagation<br>• **CI/CD**: End-to-end test in staging<br>• **Resilience**: retry backoff                                                                                          | \[Pending] |
|  **4** | • `POST /api/v1/inventory/{id}/reorder` – trigger reorder                                                                                                               | `StockReplenished`                           | Inventory: update stock<br>Analytics: ingest stock events                                               | • **Messaging**: schema versioning<br>• **Resilience**: idempotent API, retry<br>• **Observability**: inventory metrics dashboard<br>• **CI/CD**: integration tests, image scan                                                                                  | \[Pending] |
|  **5** | • `POST /api/v1/invoices` – generate Invoice<br>• `POST /api/v1/claims/{id}/submit` – submit Claim                                                                      | `InvoiceGenerated`, `ClaimSubmitted`         | Notification: invoice & submission notifications<br>AuditLogging & Analytics: record/ingest both events | • **Security**: Vault‑backed DB credentials<br>• **Resilience**: fallback invoice template<br>• **CI/CD**: contract + chaos test<br>• **Observability**: billing latency SLO<br>• **Config**: feature flags                                                      | \[Pending] |
|  **6** | • `GET /api/v1/patients` – list Patients (pagination, filters)<br>• `GET /api/v1/patients/{id}` – fetch details<br>• `GET /api/v1/patients/search` – search by criteria | —                                            | AuditLogging & Analytics: listeners for patient read events                                             | • **Observability**: read-model in Elasticsearch<br>• **CI/CD**: performance/regression tests<br>• **Resilience**: cache for search endpoint                                                                                                                     | \[Pending] |
|  **7** | • `PUT /api/v1/patients/{id}` – update Patient<br>• `DELETE /api/v1/patients/{id}` – delete Patient<br>• `GET /api/v1/appointments/{id}` – fetch appointment            | `PatientUpdated`                             | AuditLogging & Analytics: record and ingest `PatientUpdated`                                            | • **Messaging**: event versioning<br>• **Resilience**: saga compensation pattern prep<br>• **CI/CD**: end‑to‑end test<br>• **Security**: downstream RBAC                                                                                                         | \[Pending] |
|  **8** | • `PUT /api/v1/appointments/{id}` – modify<br>• `DELETE /api/v1/appointments/{id}` – cancel<br>• `POST /api/v1/appointments/{id}/cancel` – explicit cancel              | `AppointmentUpdated`, `AppointmentCancelled` | Notification: update & cancellation notices<br>AuditLogging & Analytics                                 | • **Messaging**: DLQ for cancellation events<br>• **CI/CD**: contract tests<br>• **Observability**: cancellation metric<br>• **Resilience**: idempotent cancel                                                                                                   | \[Pending] |
|  **9** | • `POST /api/v1/appointments/{id}/reschedule` – change slot<br>• `GET /api/v1/staff` – list<br>• `GET /api/v1/staff/{id}` – details                                     | `AppointmentUpdated`                         | Notification: send reschedule alert<br>AuditLogging & Analytics                                         | • **Config**: pagination & filters externalized<br>• **CI/CD**: UI test (Cypress)<br>• **Observability**: staff availability dashboard                                                                                                                           | \[Pending] |
| **10** | • `POST /api/v1/staff` – onboard<br>• `PUT /api/v1/staff/{id}` – edit<br>• `DELETE /api/v1/staff/{id}` – remove                                                         | `StaffOnboarded`, `StaffUpdated`             | AuditLogging & Analytics: listeners for both                                                            | • **Security**: audit trails via ELK<br>• **Resilience**: retry on service registry<br>• **CI/CD**: contract tests<br>• **Config**: dynamic role mappings                                                                                                        | \[Pending] |
| **11** | • `GET /api/v1/staff/{id}/availability`<br>• `GET /api/v1/staff/{id}/assignments`<br>• `GET /api/v1/prescriptions` – list                                               | —                                            | AuditLogging & Analytics for all reads                                                                  | • **Observability**: aggregated read metrics<br>• **CI/CD**: performance benchmark<br>• **Resilience**: cache for availability                                                                                                                                   | \[Pending] |
| **12** | • `POST /api/v1/prescriptions` – create<br>• `GET /api/v1/prescriptions/{id}` – fetch<br>• `POST /api/v1/prescriptions/{id}/fill` – fill                                | `PrescriptionFilled`                         | Notification: optional ack of fill<br>AuditLogging & Analytics                                          | • **Messaging**: retry policy on fill events<br>• **Security**: validate user scopes<br>• **CI/CD**: contract test<br>• **Observability**: prescription fill metrics                                                                                             | \[Pending] |
| **13** | • `GET /api/v1/medications/{id}/dispense` – history<br>• `GET /api/v1/inventory` – list<br>• `GET /api/v1/inventory/{id}` – details                                     | —                                            | AuditLogging & Analytics                                                                                | • **Observability**: Kibana dashboards for dispense/inventory<br>• **CI/CD**: regression tests                                                                                                                                                                   | \[Pending] |
| **14** | • `POST /api/v1/inventory` – add<br>• `PUT /api/v1/inventory/{id}` – update<br>• `POST /api/v1/inventory/{id}/reorder` – reorder                                        | `StockReplenished`                           | Notification: low‑stock alerts<br>AuditLogging & Analytics                                              | • **Security**: vhost permissions in RabbitMQ<br>• **Messaging**: schema registry integration<br>• **CI/CD**: security scan for Docker image                                                                                                                     | \[Pending] |
| **15** | • `GET /api/v1/invoices` – list<br>• `GET /api/v1/invoices/{id}` – details<br>• `GET /api/v1/claims` – list                                                             | —                                            | AuditLogging & Analytics                                                                                | • **Observability**: invoice processing metrics<br>• **CI/CD**: API contract test                                                                                                                                                                                | \[Pending] |
| **16** | • `GET /api/v1/claims/{id}` – details<br>• `POST /api/v1/claims/{id}/deny` – deny<br>• `GET /api/v1/audit/events` – list logs                                           | `ClaimDenied`                                | Notification: claim‑denied alert<br>AuditLogging & Analytics                                            | • **Resilience**: retry denial action<br>• **CI/CD**: contract + chaos test<br>• **Security**: audit on denial                                                                                                                                                   | \[Pending] |
| **17** | • `GET /api/v1/audit/events/{id}` – single<br>• `GET /api/v1/notifications` – list<br>• `GET /api/v1/notifications/{id}` – view                                         | —                                            | AuditLogging & Analytics                                                                                | • **Observability**: centralized audit query performance<br>• **CI/CD**: integration test                                                                                                                                                                        | \[Pending] |
| **18** | • `PUT /api/v1/notifications/config` – update settings<br>• `GET /api/v1/analytics/dashboard` – dashboard<br>• `GET /api/v1/analytics/reports` – reports                | —                                            | AuditLogging & Analytics                                                                                | • **Config**: dynamic notification rules<br>• **Observability**: dashboard alerts<br>• **CI/CD**: UI/contract tests                                                                                                                                              | \[Pending] |
| **19** | • `GET /api/v1/analytics/events` – raw stream<br>• Cleanup audit/analytics wiring<br>• Integration tests across all flows                                               | —                                            | Ensure AuditLogging & Analytics are subscribed to all events                                            | • **CI/CD**: full end-to-end smoke suite<br>• **Observability**: validate event subscriptions<br>• **Messaging**: purge stale queues                                                                                                                             | \[Pending] |

---

**Legend – Cross‑Cutting Enhancements**

* **Security**: mTLS, Vault, RBAC, JWT propagation
* **Resilience**: Circuit breakers, retries, bulkheads, timeouts
* **CI/CD**: GitHub Actions (lint, tests, contracts, Docker build, scan)
* **Observability**: Logging, metrics, tracing, dashboards
* **Config**: Spring Cloud Config, dynamic refresh, Vault
* **Messaging**: Schema registry, DLQs, retry policies
