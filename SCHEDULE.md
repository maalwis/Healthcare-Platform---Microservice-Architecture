




| -  | Endpoints & Logic                                                                                                                                                          | Event Publish                          | Services & Actions                                                                                                                                                 |
|-----:|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **1** | • `POST /api/v1/patients` – create Patient<br>• BillingService listener for `PatientRegistered`                                                                             | Publish `PatientRegistered`            | BillingService: init billing profile<br>AuditLogging: record event                                                                                                 |
| **2** | • `POST /api/v1/appointments` – book Appointment                                                                                                                          | Publish `AppointmentCreated`           | BillingService: pre-generate draft invoice<br>Notification: send confirmation                                                                                       |
| **3** | • `POST /api/v1/medications/{id}/dispense` – record dispense                                                                                                               | Publish `MedicationDispensed`          | Inventory: decrement & stock-low<br>AuditLogging: record event                                                                                                     |
| **4** | • `POST /api/v1/inventory/{id}/reorder` – trigger reorder                                                                                                                  | Publish `StockReplenished`             | Inventory: update stock<br>Analytics: ingest stock events                                                                                                          |
| **5** | • `POST /api/v1/invoices` – generate Invoice<br>• `POST /api/v1/claims/{id}/submit` – submit Claim                                                                          | Publish `InvoiceGenerated`, `ClaimSubmitted` | Notification: invoice & submission notifications<br>AuditLogging & Analytics: record/ingest both events                                                           |
| **6** | • `GET /api/v1/patients` – list Patients (pagination, filters)<br>• `GET /api/v1/patients/{id}` – fetch details<br>• `GET /api/v1/patients/search` – search by criteria      | _(no events)_                          | AuditLogging & Analytics: listeners for patient read events                                                                                                        |
| **7** | • `PUT /api/v1/patients/{id}` – update Patient (publish update)<br>• `DELETE /api/v1/patients/{id}` – delete Patient (publish update)<br>• `GET /api/v1/appointments/{id}` | Publish `PatientUpdated`               | AuditLogging & Analytics: record and ingest `PatientUpdated`                                                                                                       |
| **8** | • `PUT /api/v1/appointments/{id}` – modify Appointment (publish update)<br>• `DELETE /api/v1/appointments/{id}` – cancel Appointment (publish cancelled)<br>• `POST /api/v1/appointments/{id}/cancel` – explicit cancel | Publish `AppointmentUpdated`, `AppointmentCancelled` | Notification: update & cancellation notices<br>AuditLogging & Analytics                                                                                            |
| **9** | • `POST /api/v1/appointments/{id}/reschedule` – change slot (publish update)<br>• `GET /api/v1/staff` – list Staff<br>• `GET /api/v1/staff/{id}` – details              | Publish `AppointmentUpdated`           | Notification: send reschedule alert<br>AuditLogging & Analytics                                                                                                    |
| **10**| • `POST /api/v1/staff` – onboard Staff (publish onboarded)<br>• `PUT /api/v1/staff/{id}` – edit Staff (publish updated)<br>• `DELETE /api/v1/staff/{id}` – remove Staff    | Publish `StaffOnboarded`, `StaffUpdated` | AuditLogging & Analytics: listeners for both                                                                                                                       |
| **11**| • `GET /api/v1/staff/{id}/availability` – check availability<br>• `GET /api/v1/staff/{id}/assignments` – list assignments<br>• `GET /api/v1/prescriptions` – list Prescriptions | _(no events)_                          | AuditLogging & Analytics for all reads                                                                                                                             |
| **12**| • `POST /api/v1/prescriptions` – create Prescription<br>• `GET /api/v1/prescriptions/{id}` – fetch details<br>• `POST /api/v1/prescriptions/{id}/fill` – fill Prescription | Publish `PrescriptionFilled`           | Notification: optional ack of fill<br>AuditLogging & Analytics                                                                                                     |
| **13**| • `GET /api/v1/medications/{id}/dispense` – view dispense history<br>• `GET /api/v1/inventory` – list inventory<br>• `GET /api/v1/inventory/{id}` – item details        | _(no events)_                          | AuditLogging & Analytics                                                                                                                                           |
| **14**| • `POST /api/v1/inventory` – add new item<br>• `PUT /api/v1/inventory/{id}` – update item<br>• `POST /api/v1/inventory/{id}/reorder` – reorder                             | Publish `StockReplenished`             | Notification: low-stock alerts via NotificationService<br>AuditLogging & Analytics                                                                                  |
| **15**| • `GET /api/v1/invoices` – list invoices<br>• `GET /api/v1/invoices/{id}` – invoice details<br>• `GET /api/v1/claims` – list claims                                        | _(no events)_                          | AuditLogging & Analytics                                                                                                                                           |
| **16**| • `GET /api/v1/claims/{id}` – claim details<br>• `POST /api/v1/claims/{id}/deny` – deny claim (publish denied)<br>• `GET /api/v1/audit/events` – list audit logs           | Publish `ClaimDenied`                  | Notification: claim-denied alert<br>AuditLogging & Analytics                                                                                                       |
| **17**| • `GET /api/v1/audit/events/{id}` – single event<br>• `GET /api/v1/notifications` – list notifications<br>• `GET /api/v1/notifications/{id}` – view notification       | _(no events)_                          | AuditLogging & Analytics                                                                                                                                           |
| **18**| • `PUT /api/v1/notifications/config` – update settings<br>• `GET /api/v1/analytics/dashboard` – dashboard view<br>• `GET /api/v1/analytics/reports` – reports                  | _(no events)_                          | AuditLogging & Analytics                                                                                                                                           |
| **19**| • `GET /api/v1/analytics/events` – raw event stream<br>• Buffer/cleanup any remaining audit/analytics wiring<br>• Integration tests across all flows                         | _(no new events)_                      | Ensure AuditLogging & Analytics are subscribed to all events                                                                                                       |
